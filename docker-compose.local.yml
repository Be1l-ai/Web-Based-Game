version: '3.8'
# for local development use (naka auto read pag walang .local)
# run using "docker-compose -f docker-compose.local.yml up"

# auto generated file - TODO:need to double check
volumes:
  sqlite-data:
    driver: local

networks:
  game-network:
    driver: bridge

services:
  # C++ Backend Server
  backend:
    build:
      context: ./game/backend
      dockerfile: config/Dockerfile
    container_name: game-backend
    ports:
      - "8080:8080"
    volumes:
      - ./game/data/sqlite:/app/data
      - sqlite-data:/app/data
    networks:
      - game-network

  # Frontend Nginx Server
  frontend:
    build:
      context: ./game/frontend
      dockerfile: config/Dockerfile
    container_name: game-frontend
    volumes:
      - ./game/frontend/dist:/app/dist
    command:
      - npm run build
    networks:
      - game-network
